#line 1 "E:\\zb\\Documents\\GitHub\\fight\\testSg90\\README.md"
# SG90舵机测试项目 (ESP32版本)

这个项目用于测试SG90舵机在ESP32开发板上的运行情况。

## 所需硬件

- ESP32开发板 (任何型号)
- SG90微型舵机 × 1
- 面包板
- 杜邦线若干
- 电源 (5V，建议外接电源)

## 库依赖

### 安装ESP32Servo库

在Arduino IDE中安装ESP32Servo库：

1. 打开Arduino IDE
2. 转到 **工具** → **管理库**
3. 搜索 "ESP32Servo"
4. 安装 "ESP32Servo" by "Kevin Harrington"

或者通过命令行安装：
```bash
arduino-cli lib install "ESP32Servo"
```

## 接线说明

### SG90舵机引脚说明
- **红线 (VCC)**：电源正极 - 连接到5V或3.3V
- **棕线/黑线 (GND)**：电源负极 - 连接到GND
- **橙线/黄线 (Signal)**：控制信号线 - 连接到GPIO18

### ESP32接线图
```
SG90舵机      ESP32开发板
---------    -----------
红线 (VCC)  →  5V 或 3.3V
棕线 (GND)  →  GND
橙线 (PWM)  →  GPIO18
```

### 重要提醒
1. **电源选择**：
   - 如果只连接一个SG90，可以使用ESP32的3.3V供电
   - 推荐使用外接5V电源，共地连接，信号控制更稳定
   
2. **引脚选择**：
   - 代码中使用GPIO18作为PWM信号输出
   - 你可以根据需要修改为其他PWM支持的引脚

## 使用方法

1. 按照上述接线图连接硬件
2. 在Arduino IDE中选择正确的ESP32开发板
3. 确保已安装ESP32Servo库
4. 上传 `SG90_Test.ino` 到ESP32
5. 打开串口监视器 (波特率: 115200)
6. 观察舵机运动和串口输出

## 测试内容

程序包含4个测试序列：

1. **慢速扫描测试** (0°-180°)：舵机缓慢从0度转到180度
2. **快速返回测试** (180°-0°)：舵机快速从180度返回0度
3. **特定角度定位测试**：测试舵机在特定角度的定位精度
4. **摆动测试**：舵机在45°和135°之间来回摆动

## 故障排除

### 舵机不转动
- 检查电源连接是否正确
- 确认ESP32Servo库已正确安装
- 检查信号线是否连接到正确的GPIO引脚
- 尝试使用外接5V电源

### 舵机抖动
- 检查电源是否稳定
- 确认接线是否牢固
- 尝试调整PWM参数 (在代码中的500, 2400值)

### 串口无输出
- 确认波特率设置为115200
- 检查USB连接
- 确认选择了正确的COM端口

## 代码说明

- `SERVO_PIN`: 舵机控制信号引脚 (GPIO18)
- `LED_PIN`: 状态指示LED (GPIO2)
- `myServo.setPeriodHertz(50)`: 设置PWM频率为50Hz
- `myServo.attach(SERVO_PIN, 500, 2400)`: 设置脉冲宽度范围

## 扩展功能

你可以基于这个基础代码添加更多功能：
- 通过串口命令控制舵机角度
- 连接多个舵机
- 添加传感器实现自动控制
- 集成到物联网项目中

## 注意事项

- SG90是180度舵机，角度范围0-180度
- 不要在舵机运行时断开电源
- 长时间测试时注意舵机温度
- 如果使用多个舵机，建议使用外接电源 